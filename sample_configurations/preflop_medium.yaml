# Preflop solver config -- HU 25BB with standard MCCFR postflop model
#
# Usage:
#   cargo run -p poker-solver-trainer --release -- solve-preflop \
#     -c preflop_medium.yaml -o preflop_hu_25bb

# -- Training parameters --

iterations: 10000
equity_samples: 10000
print_every: 1000
preflop_exploitability_threshold_mbb: 25
# checkpoint_every: 5000          # save intermediate bundles every N iterations

# -- Game structure --
# Internal units: SB=1, BB=2. Stacks = stack_depth_bb x 2.

positions:
  - name: Small Blind
    short_name: SB
  - name: Big Blind
    short_name: BB

blinds:
  - [0, 1]   # SB posts 1
  - [1, 2]   # BB posts 2

antes: []

stacks: [50, 50]  # 25 BB x 2

# raise_sizes[depth] -- raise sizes at each depth ("Xbb" = raise to X BB, "Xp" = raise by X Ã— pot).
# depth 0 = first open raise, depth 1 = 3-bet, etc.
raise_sizes:
  - ["2.5bb"]    # open raise: to 2.5 BB
  - ["3.0bb"]    # 3-bet: to 3 BB

raise_cap: 4

# -- CFR variant --
# "dcfr" (default): Discounted CFR with alpha/beta/gamma discounting + LCFR weighting.
# "vanilla": Standard CFR -- no discounting, uniform iteration weighting.
# "cfrplus": CFR+ -- regrets floored to zero, linear strategy weighting.
cfr_variant: dcfr

# -- DCFR discounting (ignored when cfr_variant is vanilla or cfrplus) --

dcfr_alpha: 1.5     # positive regret discount exponent
dcfr_beta: 0.5      # negative regret discount exponent
dcfr_gamma: 2.0     # strategy sum discount exponent
dcfr_warmup: 0      # iterations before discounting starts

# epsilon-greedy exploration
exploration: 0.05

# -- Postflop model (169-hand MCCFR) --
# Replaces raw equity at showdown with solved postflop EVs.
# Remove this section entirely to use raw equity (original behaviour).

postflop_model:
  solve_type: mccfr
  bet_sizes: [0.5, 1.0, 2]    # fraction of pot
  max_raises_per_street: 1
  postflop_spr: 5.0
  postflop_solve_iterations: 1000
  mccfr_sample_pct: 0.01
  value_extraction_samples: 10000
