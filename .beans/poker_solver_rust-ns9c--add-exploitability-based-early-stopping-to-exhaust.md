---
# poker_solver_rust-ns9c
title: Add exploitability-based early stopping to exhaustive backend
status: completed
type: feature
priority: normal
created_at: 2026-02-26T13:18:22Z
updated_at: 2026-02-26T13:42:23Z
---

Replace weighted_avg_strategy_delta with proper exploitability computation in the exhaustive postflop backend. Add best-response tree traversal using equity tables and flat buffers. Update FlopStage progress to show metric_label (expl vs delta).

## Summary of Changes

- Added `best_response_ev()` and `compute_exploitability()` functions in `postflop_exhaustive.rs`
  - Best-response traversal: at BR player's nodes picks argmax EV action, at opponent's nodes plays average strategy
  - Exploitability = average of both players' best-response values
- Replaced `weighted_avg_strategy_delta` with `compute_exploitability` in the exhaustive solve loop
- Added `metric_label: String` field to `FlopStage::Solving` enum variant
  - MCCFR passes "δ" (strategy delta), Exhaustive passes "expl" (exploitability)
  - Updated Display impl and trainer progress bar to use the label
- Three new tests: uniform exploitability is positive, exploitability decreases with training, early stopping triggers

### mBB/h Conversion
- `compute_exploitability()` now returns mBB/h (pot_fraction × 3000, assuming 3 BB initial pot)
- `cfr_convergence_threshold` for Exhaustive mode is now in mBB/h, consistent with preflop solver
- Updated AKQr_vs_234r.yaml threshold from 0.5 (pot-fraction) to 200 (mBB/h)
- `INITIAL_POT_BB = 3.0` constant defines the conversion factor
