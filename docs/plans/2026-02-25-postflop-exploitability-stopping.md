# Per-Flop Postflop Exploitability as Convergence Metric

**Goal:** Replace avg positive regret with exploitability as the convergence metric and early-stopping criterion in the per-flop bucketed CFR solver.

**Approach:** Best-response tree traversal computed every iteration. Exploitability = sum of both players' best-response values (gap from Nash). Early-stop when it drops below threshold.

## Changes

### 1. New function `postflop_exploitability()`

Best-response traversal of the postflop tree using `strategy_sum`:
- Decision nodes (BR player's turn): pick action with max value
- Decision nodes (opponent's turn): play normalized average strategy
- Terminal/Chance nodes: same as `eval_with_avg_strategy`
- Sum BR values for both players across all bucket pairs
- Result in pot fractions (0.0 = Nash)

### 2. `solve_one_flop()` loop

- Replace `avg_positive_regret_flat()` with `postflop_exploitability()`
- Early-stop when `exploitability < threshold`
- Update `FlopSolveResult` to carry `exploitability` instead of `avg_regret`

### 3. Progress reporting

- Replace `avg_regret: f64` with `exploitability: f64` in `FlopStage::Solving`
- Drop regret from per-flop reporting entirely

### 4. Config

- Rename `regret_threshold` â†’ `exploitability_threshold` in postflop model config (serde alias for backward compat)
- Default ~0.01 (1% of pot)

### 5. MCCFR variant

- Apply same change to `mccfr_solve_one_flop()` in `postflop_mccfr.rs`

## Key Files

| File | Change |
|-|-|
| `crates/core/src/preflop/postflop_bucketed.rs` | New BR traversal, update solve loop |
| `crates/core/src/preflop/postflop_mccfr.rs` | Same for MCCFR variant |
| `crates/core/src/preflop/postflop_abstraction.rs` | `FlopStage` enum update |
| `sample_configurations/preflop_medium.yaml` | Threshold rename |
| `docs/training.md` | Document new parameter |
